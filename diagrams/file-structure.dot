digraph FileStructure {
    rankdir=LR;
    
    graph [
        fontname="Arial, sans-serif"
        fontsize=12
        bgcolor="#f8f9fa"
        style=filled
        pad=0.5
        nodesep=0.4
        ranksep=0.8
    ];
    
    node [
        fontname="Arial, sans-serif"
        fontsize=9
        style=filled
        shape=box
        margin=0.05
    ];
    
    edge [
        fontname="Arial, sans-serif"
        fontsize=8
        color="#666666"
    ];

    // Root del proyecto
    root [
        label="ðŸ“ prueba-clean-architecture\n(Project Root)"
        fillcolor="#e3f2fd"
        color="#1976d2"
        fontsize=11
    ];

    // Src principal
    src [
        label="ðŸ“ src"
        fillcolor="#f3e5f5"
        color="#7b1fa2"
        fontsize=10
    ];

    // Domain Layer
    domain [
        label="ðŸ“ domain\nðŸ§  Core Business Logic"
        fillcolor="#fff3e0"
        color="#f57c00"
    ];

    domain_entities [
        label="ðŸ“ entities\nâ”œâ”€â”€ Product.ts â­\nâ”œâ”€â”€ User.ts â­"
        fillcolor="#ffe0b2"
        shape=note
    ];

    domain_value_objects [
        label="ðŸ“ value-objects\nâ”œâ”€â”€ Email.ts ðŸ’Ž\nâ”œâ”€â”€ Money.ts ðŸ’Ž"
        fillcolor="#ffe0b2"
        shape=note
    ];

    domain_repositories [
        label="ðŸ“ repositories\nâ”œâ”€â”€ IProductRepository.ts ðŸ“‹\nâ”œâ”€â”€ IUserRepository.ts ðŸ“‹"
        fillcolor="#ffe0b2"
        shape=note
    ];

    domain_events [
        label="ðŸ“ events\nâ”œâ”€â”€ DomainEvent.ts ðŸ“¡\nâ”œâ”€â”€ EventBus.ts ðŸšŒ"
        fillcolor="#ffe0b2"
        shape=note
    ];

    domain_errors [
        label="ðŸ“„ errors/DomainError.ts\nâš ï¸ Business Exceptions"
        fillcolor="#ffe0b2"
        shape=note
    ];

    // Application Layer
    application [
        label="ðŸ“ application\nðŸ¢ Use Cases & DTOs"
        fillcolor="#e8f5e8"
        color="#388e3c"
    ];

    app_usecases [
        label="ðŸ“ use-cases\nâ”œâ”€â”€ CreateProduct.ts âš™ï¸\nâ”œâ”€â”€ GetAllProducts.ts âš™ï¸\nâ”œâ”€â”€ UpdateProduct.ts âš™ï¸\nâ”œâ”€â”€ CreateUser.ts âš™ï¸\nâ”œâ”€â”€ ActivateUser.ts âš™ï¸\nâ””â”€â”€ ... (14 files total)"
        fillcolor="#c8e6c9"
        shape=note
    ];

    app_dtos [
        label="ðŸ“ dtos\nâ”œâ”€â”€ CreateProductDTO.ts ðŸ“¨\nâ”œâ”€â”€ ProductResponseDTO.ts ðŸ“¤\nâ”œâ”€â”€ CreateUserDTO.ts ðŸ“¨\nâ”œâ”€â”€ UserResponseDTO.ts ðŸ“¤\nâ””â”€â”€ UpdateXXXDTO.ts files"
        fillcolor="#c8e6c9"
        shape=note
    ];

    app_interfaces [
        label="ðŸ“ interfaces\nâ”œâ”€â”€ ICreateProduct.ts ðŸ”Œ"
        fillcolor="#c8e6c9"
        shape=note
    ];

    // Adapters Layer
    adapters [
        label="ðŸ“ adapters\nðŸ”Œ External Interfaces"
        fillcolor="#f3e5f5"
        color="#7b1fa2"
    ];

    adapters_api [
        label="ðŸ“ api/controllers\nâ”œâ”€â”€ ProductController.ts ðŸŽ¯\nâ”œâ”€â”€ UserController.ts ðŸŽ¯"
        fillcolor="#e1bee7"
        shape=note
    ];

    adapters_db [
        label="ðŸ“ db"
        fillcolor="#e1bee7"
    ];

    db_entities [
        label="ðŸ“ db/entities\nâ”œâ”€â”€ ProductEntity.ts ðŸ“Š\nâ”œâ”€â”€ UserEntity.ts ðŸ“Š"
        fillcolor="#d1c4e9"
        shape=note
    ];

    db_repositories [
        label="ðŸ“ db/repositories\nâ”œâ”€â”€ TypeOrmProductRepository.ts ðŸ—ƒï¸\nâ”œâ”€â”€ TypeOrmUserRepository.ts ðŸ—ƒï¸"
        fillcolor="#d1c4e9"
        shape=note
    ];

    db_mappers [
        label="ðŸ“ db/mappers\nâ”œâ”€â”€ ProductMapper.ts ðŸ”„\nâ”œâ”€â”€ UserMapper.ts ðŸ”„"
        fillcolor="#d1c4e9"
        shape=note
    ];

    // Infrastructure Layer
    infrastructure [
        label="ðŸ“ infrastructure\nðŸ”§ Framework Configuration"
        fillcolor="#e8eaf6"
        color="#3f51b5"
    ];

    infra_config [
        label="ðŸ“ config\nâ”œâ”€â”€ database.config.ts âš™ï¸"
        fillcolor="#c5cae9"
        shape=note
    ];

    infra_modules [
        label="ðŸ“ modules\nâ”œâ”€â”€ ProductModule.ts ðŸ“¦\nâ”œâ”€â”€ UserModule.ts ðŸ“¦"
        fillcolor="#c5cae9"
        shape=note
    ];

    // Shared utilities
    shared [
        label="ðŸ“ shared\nðŸ› ï¸ Common Utilities"
        fillcolor="#f1f8e9"
        color="#689f38"
    ];

    shared_utils [
        label="ðŸ“ utils\nâ”œâ”€â”€ IdGenerator.ts ðŸ†”"
        fillcolor="#dcedc8"
        shape=note
    ];

    // Main files
    main_files [
        label="ðŸ“„ Main Files\nâ”œâ”€â”€ main.ts ðŸš€\nâ”œâ”€â”€ app.module.ts ðŸ“±\nâ”œâ”€â”€ app.controller.ts ðŸŽ®\nâ””â”€â”€ app.service.ts ðŸ”§"
        fillcolor="#f3e5f5"
        shape=note
    ];

    // Test structure
    test [
        label="ðŸ“ test\nðŸ§ª Testing Suite"
        fillcolor="#f3e5f5"
        color="#7b1fa2"
    ];

    test_unit [
        label="ðŸ“ unit\nâ”œâ”€â”€ domain/ ðŸ§ \nâ”‚   â”œâ”€â”€ entities/\nâ”‚   â”œâ”€â”€ value-objects/ ðŸ’Ž\nâ”‚   â””â”€â”€ events/ ðŸ“¡\nâ”œâ”€â”€ application/ ðŸ¢\nâ”‚   â””â”€â”€ use-cases/\nâ””â”€â”€ adapters/ ðŸ”Œ\n    â””â”€â”€ db/mappers/"
        fillcolor="#e1bee7"
        shape=note
    ];

    test_e2e [
        label="ðŸ“ e2e\nâ”œâ”€â”€ app.e2e-spec.ts ðŸ”—"
        fillcolor="#e1bee7"
        shape=note
    ];

    // Config files
    config_files [
        label="ðŸ“„ Config Files\nâ”œâ”€â”€ package.json ðŸ“¦\nâ”œâ”€â”€ tsconfig.json âš™ï¸\nâ”œâ”€â”€ nest-cli.json ðŸ¦\nâ”œâ”€â”€ docker-compose.yml ðŸ³\nâ”œâ”€â”€ Dockerfile ðŸ“‹\nâ”œâ”€â”€ .env / .env.example ðŸ”\nâ””â”€â”€ README.md ðŸ“–"
        fillcolor="#f5f5f5"
        shape=note
    ];

    // Documentation
    docs [
        label="ðŸ“„ Documentation\nâ”œâ”€â”€ README_CLEAN_ARCH.md ðŸ“š\nâ”œâ”€â”€ CLEAN_ARCHITECTURE_IMPROVEMENTS.md ðŸ“ˆ\nâ”œâ”€â”€ DEPLOYMENT_SUMMARY.md ðŸš€\nâ””â”€â”€ TEST_SUMMARY.md ðŸ§ª"
        fillcolor="#e8f5e8"
        shape=note
    ];

    // Connections - JerarquÃ­a de archivos
    root -> src;
    root -> test;
    root -> config_files;
    root -> docs;

    // Src structure
    src -> domain;
    src -> application;
    src -> adapters;
    src -> infrastructure;
    src -> shared;
    src -> main_files;

    // Domain structure
    domain -> domain_entities;
    domain -> domain_value_objects;
    domain -> domain_repositories;
    domain -> domain_events;
    domain -> domain_errors;

    // Application structure
    application -> app_usecases;
    application -> app_dtos;
    application -> app_interfaces;

    // Adapters structure
    adapters -> adapters_api;
    adapters -> adapters_db;
    adapters_db -> db_entities;
    adapters_db -> db_repositories;
    adapters_db -> db_mappers;

    // Infrastructure structure
    infrastructure -> infra_config;
    infrastructure -> infra_modules;

    // Shared structure
    shared -> shared_utils;

    // Test structure
    test -> test_unit;
    test -> test_e2e;

    // Dependency relationships (colored by layer)
    adapters_api -> app_usecases [label="calls" color="#1976d2" style=dashed];
    app_usecases -> domain_entities [label="creates" color="#388e3c" style=dashed];
    app_usecases -> domain_repositories [label="depends" color="#388e3c" style=dashed];
    db_repositories -> domain_repositories [label="implements" color="#7b1fa2" style=dashed];
    db_mappers -> domain_entities [label="converts" color="#7b1fa2" style=dashed];
    domain_entities -> domain_value_objects [label="uses" color="#f57c00" style=dashed];

    // TÃ­tulo
    labelloc="t";
    label=<<B>Project File Structure - Clean Architecture</B><BR/>
    <I>NestJS TypeScript Project Organization</I><BR/>
    <FONT POINT-SIZE="10">Total: ~50+ files organized by architectural layers</FONT>>;
    fontsize=16;
}
